<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âª∫Á´ãÊ¥ªË∫çÁ§æÁæ§ÔºöÁ∑ö‰∏äË®éË´ñÂçÄÈ†ÅÈù¢Ë®≠Ë®àËàáÂäüËÉΩ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" th:href="@{/css/discuss_style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
    <link rel="manifest" th:href="@{/manifest.json}">
    <meta name="theme-color" content="#FF5722">
    <link rel="apple-touch-icon" th:href="@{/img/logo.png}">
</head>
<body class="min-h-screen bg-gray-100">
    <script th:src="@{/js/discuss.js}"></script>
    <!-- Header -->
    <header class="app-header">
        <div class="header-container">
            <div class="logo-container">
                <a th:href="@{/index}" class="logo">
                    <div class="logo-img bg-orange-500 text-white flex items-center justify-center text-lg font-bold">
                        üçΩÔ∏è</div>
                    <span class="logo-text">FoodieTime È£üÂàª</span>
                </a>
            </div>
            <div class="search-container">
                <div class="search-bar">
                    <i class="material-icons-outlined search-icon">search</i>
                    <input type="text" placeholder="ÊêúÂ∞ãÈ§êÂª≥„ÄÅÊñôÁêÜÊàñÂú∞ÂùÄ..." class="search-input">
                    <i class="material-icons-outlined mic-icon">mic</i>
                    <i class="material-icons-outlined camera-icon">photo_camera</i>
                </div>
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li class="nav-item"><a th:href="@{/map}" class="nav-link">Âú∞Âúñ</a></li>
                    <li class="nav-item"><a th:href="@{/group-order}" class="nav-link">ÂúòË≥º</a></li>
                    <li class="nav-item"><a th:href="@{/deals}" class="nav-link">ÂÑ™ÊÉ†</a></li>
                    <li class="nav-item"><a th:href="@{/login}" class="nav-link login-btn">ÁôªÂÖ•/Ë®ªÂÜä</a></li>
                </ul>
                <button class="menu-toggle" aria-label="ÈñãÂïüÈÅ∏ÂñÆ">
                    <i class="material-icons-outlined">menu</i>
                </button>
            </nav>
        </div>
    </header>
    <!-- È†ÇÈÉ®ÂàÜÈ†ÅÂ∞éËà™ -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-center space-x-2">
                <button class="btn btn-ghost px-3">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="flex items-center space-x-1">
                    <button th:each="page : ${pages}" th:classappend="${page.active} ? 'btn-primary' : 'btn-ghost'" class="btn px-3 py-1 text-sm" th:text="${page.number}"></button>
                    <span class="text-gray-500" th:if="${pages.size() > 5}">...</span>
                    <button class="btn btn-ghost px-3 py-1 text-sm" th:text="${pages[pages.size()-1].number}" th:if="${pages.size() > 5}"></button>
                </div>
                <button class="btn btn-ghost px-3">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto">
        <!-- ‰∏ªË¶ÅÂàÜÈ°ûÊ®ôÁ±§ -->
        <div class="bg-white border-b border-gray-200">
            <div class="flex space-x-4 px-4 py-2">
                <button th:each="cat : ${categories}" th:class="'btn ' + (${cat.active} ? 'btn-primary' : 'btn-ghost')" th:text="${cat.name}"></button>
            </div>
        </div>
        <!-- Êñ∞Â¢ûÁôºÂ∏ÉË≤ºÊñáÊåâÈàï -->
        <button class="btn btn-primary" style="margin-left: 1rem;" th:onclick="'location.href=\'' + @{/post/new} + '\''">ÁôºÂ∏ÉË≤ºÊñá</button>
    </div>

    <!-- Â∑•ÂÖ∑Âàó -->
    <div class="bg-orange-600 text-white">
        <div class="flex items-center justify-between px-4 py-3">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-filter"></i>
                    <span class="text-sm">ÁØ©ÈÅ∏Ôºö</span>
                    <select class="select-dropdown" th:name="sort" th:onchange="this.form.submit()">
                        <option value="likes" th:selected="${sort == 'likes'}">ËÆöÊï∏</option>
                        <option value="replies" th:selected="${sort == 'replies'}">ÁïôË®ÄÊï∏</option>
                        <option value="views" th:selected="${sort == 'views'}">ÁÄèË¶ΩÊï∏</option>
                    </select>
                </div>
                <button class="btn btn-secondary px-3 py-1 text-sm" th:classappend="${featured} ? '' : 'btn-ghost'">Á≤æÈÅ∏</button>
                <button class="btn px-3 py-1 text-sm" style="background-color: #ea580c; color: white;">ÁÜ±ÈñÄ</button>
            </div>
            <div class="flex items-center space-x-6">
                <div class="text-center">
                    <div class="text-sm font-medium">ÁôºÊñáÊôÇÈñì</div>
                </div>
                <div class="text-center">
                    <div class="text-sm font-medium">‰∫íÂãï / ‰∫∫Ê∞£</div>
                </div>
                <div class="text-center">
                    <div class="text-sm font-medium">ÊúÄÊñ∞ÁïôË®Ä</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ë®éË´ñ‰∏≤ÂàóË°® -->
    <div class="bg-white">
        <div th:each="thread,iterStat : ${threads}" class="forum-thread-row border-b border-gray-200 p-3" th:classappend="${iterStat.index % 2 == 0} ? ' bg-yellow-50' : ' bg-white'">
            <div class="flex items-start space-x-4">
                <!-- ÂàÜÈ°ûÂíåÁ∑®Ëôü -->
                <div class="flex flex-col items-center min-w-16 text-center">
                    <div class="text-xs text-gray-500 mb-1" th:text="${thread.category}"></div>
                    <div class="text-xl font-bold" th:classappend="' text-' + ${thread.color}" th:text="${thread.number}"></div>
                </div>
                <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
                <div class="flex-1">
                    <div class="flex items-start space-x-2">
                        <!-- Ê®ôÁ±§ -->
                        <div class="flex items-center space-x-1">
                            <span class="badge" th:classappend="' badge-' + ${thread.badgeColor}" th:text="${thread.badge}"></span>
                        </div>
                        <!-- Ê®ôÈ°å -->
                        <div class="flex-1">
                            <h3 class="text-sm font-medium text-gray-900 leading-relaxed" th:text="${thread.title}"></h3>
                            <p class="text-xs text-gray-600 mt-1" th:text="${thread.summary}"></p>
                        </div>
                    </div>
                </div>
                <!-- ‰∫íÂãïÊï∏Êìö -->
                <div class="text-center min-w-24">
                    <div class="text-sm font-medium text-orange-600" th:text="${thread.stats}"></div>
                    <div class="text-xs text-blue-600" th:text="${thread.author}"></div>
                </div>
                <!-- ÊúÄÊñ∞ÁïôË®Ä -->
                <div class="text-center min-w-24">
                    <div class="text-xs text-gray-600" th:text="${thread.lastReplyTime}"></div>
                    <div class="text-xs text-blue-600" th:text="${thread.lastReplyUser}"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®ÂàÜÈ†ÅÂ∞éËà™ -->
    <div class="bg-white border-t border-gray-200 mt-4">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-center space-x-2">
                <button class="btn btn-ghost px-3">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="flex items-center space-x-1">
                    <button th:each="page : ${pages}" th:classappend="${page.active} ? 'btn-primary' : 'btn-ghost'" class="btn px-3 py-1 text-sm" th:text="${page.number}"></button>
                    <span class="text-gray-500" th:if="${pages.size() > 5}">...</span>
                    <button class="btn btn-ghost px-3 py-1 text-sm" th:text="${pages[pages.size()-1].number}" th:if="${pages.size() > 5}"></button>
                </div>
                <button class="btn btn-ghost px-3">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
</body>


    <script>
        // Á∞°ÂñÆÁöÑ‰∫íÂãïÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function () {
            // ÂàÜÈ†ÅÊåâÈàïÈªûÊìäÊïàÊûú
            const pageButtons = document.querySelectorAll('.btn');
            pageButtons.forEach(button => {
                button.addEventListener('click', function () {
                    if (this.textContent.match(/^\d+$/)) {
                        // ÁßªÈô§ÂÖ∂‰ªñÊåâÈàïÁöÑ active ÁãÄÊÖã
                        pageButtons.forEach(btn => {
                            if (btn.textContent.match(/^\d+$/)) {
                                btn.className = btn.className.replace('btn-primary', 'btn-ghost');
                            }
                        });
                        // Ê∑ªÂä†Áï∂ÂâçÊåâÈàïÁöÑ active ÁãÄÊÖã
                        this.className = this.className.replace('btn-ghost', 'btn-primary');
                    }
                });
            });

            // ÂàÜÈ°ûÊåâÈàïÈªûÊìäÊïàÊûú
            // const categoryButtons = document.querySelectorAll('[class*="btn-ghost"]:not([class*="px-3"])');
            // categoryButtons.forEach(button => {
            //     button.addEventListener('click', function () {
            //         // ÁßªÈô§ÂÖÑÂºüÂÖÉÁ¥†ÁöÑ active ÁãÄÊÖã
            //         const siblings = this.parentElement.children;
            //         Array.from(siblings).forEach(sibling => {
            //             if (sibling !== this) {
            //                 sibling.className = sibling.className.replace('btn-primary', 'btn-ghost');
            //             }
            //         });
            //         // Ê∑ªÂä†Áï∂ÂâçÊåâÈàïÁöÑ active ÁãÄÊÖã
            //         this.className = this.className.replace('btn-ghost', 'btn-primary');
            //         console.log('ÈªûÊìäÂàÜÈ°ûÔºö', this.textContent);
            //     });
            // });

            // Ë®éË´ñ‰∏≤ÈªûÊìäÊïàÊûú
            const threadRows = document.querySelectorAll('.forum-thread-row');
            threadRows.forEach(row => {
                row.addEventListener('click', function () {
                    const title = this.querySelector('h3').textContent;
                    console.log('ÈªûÊìäË®éË´ñ‰∏≤Ôºö', title);
                });
            });
        });
    </script>
</body>

</html>