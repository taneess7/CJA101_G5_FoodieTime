<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>收藏團購 - FoodieTime 食刻</title>
	<link rel="stylesheet" th:href="@{/css/front/favoritelist/style.css}">
	<link rel="stylesheet" th:href="@{/css/front/favoritelist/member-favorites.css}">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	<meta name="theme-color" content="#FF5722">
	<link rel="apple-touch-icon" th:href="@{/images/icons/logo.png}">
</head>
<body>
<header class="app-header">
    <div class="header-container">
        <!-- Logo 區域 -->
        <div class="logo-container">
            <a th:href="@{/index}" class="logo">
                <img th:src="@{/img/logo.png}" alt="FoodieTime 食刻" class="logo-img">
                <span class="logo-text">FoodieTime 食刻</span>
            </a>
        </div>

        <!-- 搜尋區域 -->
        <div class="search-container">
            <div class="search-bar">
                <i class="search-icon material-icons-outlined">search</i>
                <input type="text" class="search-input" placeholder="搜尋餐廳、料理或地址...">
                <button class="mic-icon" aria-label="語音搜尋">
                    <i class="material-icons-outlined">mic</i>
                </button>
                <button class="camera-icon" aria-label="拍照搜尋">
                    <i class="material-icons-outlined">photo_camera</i>
                </button>
            </div>
        </div>

        <!-- 導覽選單 -->
        <nav class="main-nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a th:href="@{/map}" class="nav-link">地圖</a>
                </li>
                <li class="nav-item">
                    <a th:href="@{/group-order.html}" class="nav-link">團購</a>
                </li>
                <li class="nav-item">
                    <a th:href="@{/deals.html}" class="nav-link">優惠</a>
                </li>
                <li class="nav-item">
                    <button class="login-btn"><a th:href="@{/login}">登入/註冊</a></button>
                </li>
            </ul>
        </nav>
    </div>
</header>
<main class="main-content">
    <div class="content-container">
        <div class="member-section">
        	<!-- 主內容區 -->
            <div class="member-content">
                <div class="member-content-header">
                    <h1 class="member-content-title">我的收藏團購</h1>
                    
                </div>
                <div class="restaurants-container" id="gb-container">
                    <div class="restaurant-card" th:each="item : ${collectionList}" th:attr="data-category=${item.groupBuyingCase.gbProd.gbprodcgVO.gbCateName}">
                        <div class="restaurant-details">
                            <h3 class="restaurant-name" th:text="${item.groupBuyingCase.gbTitle}">團購標題</h3>
                            <div class="restaurant-category">
                                <span class="cuisine-tag" th:text="${item.groupBuyingCase.gbProd.gbprodcgVO.gbCateName}">分類</span>
                            </div>
                            <div class="product-list">
                                <div class="product-block-row">
                                    <div class="product-img-col">
                                        <img class="product-image"
                                             th:if="${item.groupBuyingCase.gbProd.gbProdPhoto != null}"
                                             th:src="@{'/gb/gbproduct/image/' + ${item.groupBuyingCase.gbProd.gbProdId}}" alt="商品圖片" />
                                        <img class="product-image"
                                             th:unless="${item.groupBuyingCase.gbProd.gbProdPhoto != null}"
                                             th:src="@{/images/restaurant/placeholder.svg}" alt="預設圖片" />
                                    </div>
                                    <div class="product-info-col">
                                        <p class="product-name" th:text="${item.groupBuyingCase.gbProd.gbProdName}">商品名稱</p>
                                        <form th:action="@{/gb/remove}" method="post" style="display:inline;">
                                            <input type="hidden" name="memId" th:value="${item.member.memId}" />
                                            <input type="hidden" name="gbId" th:value="${item.groupBuyingCase.gbId}" />
                                            <button type="submit" class="action-btn favorite-btn active" aria-label="取消收藏">
                                                <i class="material-icons-outlined">favorite</i>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="restaurant-info">
                                <div class="info-item">
                                    <i class="material-icons-outlined">store</i>
                                    <span th:text="${item.groupBuyingCase.store.storName}">店家名稱</span>
                                </div>
                                <div class="info-item">
                                    <i class="material-icons-outlined">access_time</i>
                                    <span th:text="${#temporals.format(item.groupBuyingCase.gbStartTime, 'yyyy-MM-dd HH:mm')} + ' ~ ' + ${#temporals.format(item.groupBuyingCase.gbEndTime, 'yyyy-MM-dd HH:mm')}">團購期間</span>
                                </div>
                            </div>
                            <div class="restaurant-actions-bottom">
                                <a th:href="@{'/gb/detail/' + ${item.groupBuyingCase.gbId}}" class="view-btn">查看團購</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 24px;">
                    <button class="btn btn-secondary" onclick="window.history.back();">返回</button>
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="app-footer">
    <div class="container">
        <p>&copy; 2024 FoodieTime 食刻. All rights reserved.</p>
    </div>
</footer>
<script>
function filterGbFavorites() {
    const selected = document.getElementById("gbCategorySelect").value;
    const cards = document.querySelectorAll(".restaurant-card");
    cards.forEach(card => {
        const category = card.getAttribute("data-category");
        card.style.display = (selected === "all" || category === selected) ? "block" : "none";
    });
}

</script>
</body>
</html>